pipeline {
  agent {
    node {
      label 'nodejs'
    }
  }


  
  stages{
      stage('checkout'){
          steps {
            container('nodejs'){
               git branch: 'fosscheck', url: 'https://github.com/Feeeenng/devops-maven-sample/'
               sh 'node --version'
               stash name: 'code'
            }
            
          }
        
      }
    
    
    stage('fosscheck'){
      agent {
        kubernetes {
          inheritFrom 'maven'
          containerTemplate {
            name 'maven'
            image 'feeeng/builder-maven:v3.3.0-fosscheck-release'
          }

        }

      }

          steps {
              container('maven'){
                    unstash 'code'
                    sh 'java -jar /home/jenkins/cli-extractor.jar  check  $WORKSPACE c3R6d4ZkPDF5dpiPcFSFcnTBjX2pdkZv2IiGX15NF9Xi6vs= -p fosscheck' 
              }
            }
        }
    
  }
  



}
